<template>
<div class="container mt-2">
    <nav>
        <div class="nav nav-tabs justify-content-center" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Descriptive</a>
            <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Fundamentals</a>
            <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Technical</a>
        </div>
    </nav>
        <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <table id="tablePreview" class="table table-sm mt-3">
                <tbody>
                    <tr class="table-secondary">
                    <th scope="row">Exchange</th>
                    <td>
                        <select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </td>
                    <td>Sector</td>
                    <td>
                        <select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </td>
                    <td>Industry</td>
                    <td><select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                        </td>
                    
                    </tr>
                    <tr class="table-secondary">
                    <th scope="row">Country</th>
                    <td>
                        <select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            </select>
                    </td>
                    <td>Avg. Volume</td>
                    <td><select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </td>
                    <td>Current Volume</td>
                    <td>
                        <select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                        </td>
                    </tr>
                    <tr class="table-secondary">
                    <th scope="row">Div. Yield</th>
                    <td>
                        <select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </td>
                    <td>Index</td>
                    <td><select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                        </td>
                    <td>Price</td>
                    <td><select class="custom-select custom-select-sm">
                            <option selected>Choose</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                        <option value="3">Three</option>
                        </select>
                        </td>
                    </tr>
                </tbody>
        </table>

        </div>
        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">Fundamental filters</div>
        <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">Still working on technical filters</div>
    </div>
    <ul class="nav nav-pills justify-content-center nav-fill mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Overview</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Financial</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Valuation</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Performance</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Technical</a>
        </li>
    </ul>
    <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
            <div id="example" ref="example"></div>
        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
            <div id="financial" ref="financial"></div>
        </div>
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">...</div>
    </div>
</div>

</template>

<script>

//var Tabulator = require('tabulator-tables');
import Tabulator from 'tabulator-tables';

$(document).ready(function(){
    // $('a[data-toggle="pill"]').on('shown.bs.pill', function(e){
    //     var currentTab = $(e.target).text(); // get current tab
    //     var LastTab = $(e.relatedTarget).text(); // get last tab
    //     console.log("Tabs changed")
    // });
    $('#myTab a').on('click', function (e) {
        e.preventDefault()
        //$(this).tab('show')
        console.log("Shown")
    })
});

export default {
    name : 'Screener',
    data () {
        return {
            tabledata : [
            {id:1, name:"Billy Bob", age:"12", gender:"male", height:1, col:"red", dob:"14/05/1982"},
            {id:2, name:"Mary May", age:"1", gender:"female", height:2, col:"blue", dob:"14/05/1982"},
            ],
            table : [
            {id:1, name:"Billy Bob", age:"12", gender:"male", height:1, col:"red", dob:"14/05/1982"},
            {id:2, name:"Mary May", age:"1", gender:"female", height:2, col:"blue", dob:"14/05/1982"},
            ]
            

        }
    },
    mounted() {
        this.loadTable()
        //this.loadSecond()
    },
    methods : {
        loadTable() {
            //var tabledata = 
            var table_id = this.$refs["example"];
            var table = new Tabulator(table_id, {
                data: this.tabledata,           //load row data from array
                layout:"fitColumns",      //fit columns to width of table
                responsiveLayout:"hide",  //hide columns that dont fit on the table
                tooltips:true,            //show tool tips on cells
                addRowPos:"top",          //when adding a new row, add it to the top of the table
                history:true,             //allow undo and redo actions on the table
                // pagination:"local",       //paginate the data
                // paginationSize:7,         //allow 7 rows per page of data
                movableColumns:true,      //allow column order to be changed
                resizableRows:true,       //allow row order to be changed
                initialSort:[             //set the initial sort order of the data
                    {column:"name", dir:"asc"},
                ],
                columns:[                 //define the table columns
                    {title:"Name", field:"name", width:150},
	 	            {title:"Age", field:"age", align:"left", formatter:"progress"},
	 	            {title:"Favourite Color", field:"col"},
	 	            {title:"Date Of Birth", field:"dob", sorter:"date", align:"center"},
                ],
            });
        },
        loadSecond(){
            var financial_table = this.$refs["financial"]
            var fin_table = new Tabulator(financial_table, {
                data: this.table,           //load row data from array
                layout:"fitColumns",      //fit columns to width of table
                responsiveLayout:"hide",  //hide columns that dont fit on the table
                tooltips:true,            //show tool tips on cells
                addRowPos:"top",          //when adding a new row, add it to the top of the table
                //history:true,             //allow undo and redo actions on the table
                // pagination:"local",       //paginate the data
                // paginationSize:7,         //allow 7 rows per page of data
                movableColumns:true,      //allow column order to be changed
                resizableRows:true,       //allow row order to be changed
                initialSort:[             //set the initial sort order of the data
                    {column:"name", dir:"asc"},
                ],
                columns:[                 //define the table columns
                    {title:"Name", field:"name", width:150},
	 	            {title:"Age", field:"age", align:"left", formatter:"progress"},
	 	            {title:"Favourite Color", field:"col"},
	 	            {title:"Date Of Birth", field:"dob", sorter:"date", align:"center"},
                ],
            });
        }
    }
}
</script>

